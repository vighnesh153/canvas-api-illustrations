(this["webpackJsonpcanvas-api-illustrations"]=this["webpackJsonpcanvas-api-illustrations"]||[]).push([[18,26],{31:function(t,e,i){"use strict";i.r(e),i.d(e,"FlappyBlockGameController",(function(){return r}));var n=i(91),s=i(92),a=i(93),o=function(){function t(e,i,s,a){Object(n.a)(this,t),this.canvas=e,this.x=i,this.y=s,this.height=a,this.passedBlock=!1,this.safeToRemoveFromArray=!1}return Object(s.a)(t,[{key:"behind",value:function(e){return this.x+t.width<e.x}},{key:"pointInside",value:function(e){return e.x>=this.x&&e.x<=this.x+t.width&&(e.y>=this.y&&e.y<=this.y+this.height)}},{key:"collidesWith",value:function(t){var e={x:t.x,y:t.y},i={x:t.x+t.width,y:t.y},n={x:t.x,y:t.y+t.height},s={x:t.x+t.width,y:t.y+t.height},a=this.pointInside.bind(this);return a(e)||a(i)||a(n)||a(s)}},{key:"update",value:function(){this.x-=t.velocityX,this.safeToRemoveFromArray=this.x+t.width<=0}},{key:"draw",value:function(){this.canvas.drawFilledRect(this.x,this.y,t.width,this.height,t.color)}}]),t}();o.velocityX=3,o.width=30,o.color="blue";var r=function(){function t(e){Object(n.a)(this,t),this.canvas=void 0,this.interval=setTimeout((function(){}),0),this.playerScore=0,this.gameRunning=!1,this.distanceBetweenVerticalPipes=100,this.backgroundColor="white",this.outlineColor="black",this.homeScreenTextColor="black",this.scoreColor="green",this.offset=20,this.frameCounter=0,this.gravity=.08,this.blockOriginalVelocity=.1,this.block={x:0,y:0,width:10,height:10,color:"red",velocityY:0},this.pipes=[],this.pipesAppearAfterNFrames=80,this.canvas=new a.a(e),this.reset()}return Object(s.a)(t,[{key:"onSpacePress",value:function(){this.gameRunning?this.block.velocityY=-2:(this.gameRunning=!0,this.reset(),this.pipes=[],this.start())}},{key:"start",value:function(){this.interval=setInterval(this.render.bind(this),16)}},{key:"reset",value:function(){this.resetBlockPosition(),this.block.velocityY=this.blockOriginalVelocity,this.playerScore=0,this.frameCounter=0}},{key:"resetBlockPosition",value:function(){this.block.x=(2*this.canvas.width/3-this.block.width)/2,this.block.y=(this.canvas.height-this.block.height)/2}},{key:"stop",value:function(){this.gameRunning=!1,clearInterval(this.interval),this.resetBlockPosition(),this.render()}},{key:"render",value:function(){this.drawBackground(),this.gameRunning?(this.renderGame(),this.updateGameState()):(this.renderStartScreen(),clearInterval(this.interval))}},{key:"renderGame",value:function(){this.drawBlock(),this.drawPipes(),this.writeScore()}},{key:"updateGameState",value:function(){this.block.y+=this.block.velocityY,this.block.velocityY+=this.gravity,this.collidesWithSkyOrFellsDown(),this.updatePipes(),this.frameCounter++,this.frameCounter===this.pipesAppearAfterNFrames&&(this.addPipes(),this.frameCounter%=this.pipesAppearAfterNFrames)}},{key:"collidesWithSkyOrFellsDown",value:function(){var t=this.block,e=t.y,i=t.height;(e<=this.offset||e+i>=this.canvas.height-this.offset)&&this.stop()}},{key:"renderStartScreen",value:function(){var t="Your score: ".concat(this.playerScore),e=this.scoreColor,i=this.homeScreenTextColor,n=this.canvas,s=n.width/2,a=n.height/2;this.drawBlock(),this.canvas.writeText(t,s-50,a+20,25,e),this.canvas.writeText("Hit 'SPACEBAR' to start and jump.",s-100,a+50,25,i)}},{key:"writeScore",value:function(){var t="Your score: ".concat(this.playerScore),e=this.homeScreenTextColor;this.canvas.writeText(t,this.offset+10,16,18,e)}},{key:"drawBackground",value:function(){var t=this.offset,e=this.backgroundColor,i=this.outlineColor,n=this.canvas,s=n.width,a=n.height;n.drawFilledRect(0,0,s,a,e),n.drawLine(0,t,s,t,1,i),n.drawLine(0,a-t,s,a-t,1,i)}},{key:"drawBlock",value:function(){var t=this.block,e=t.x,i=t.y,n=t.width,s=t.height,a=t.color;this.canvas.drawFilledRect(e,i,n,s,a)}},{key:"addPipes",value:function(){var t=this.canvas,e=this.distanceBetweenVerticalPipes,i=this.offset,n=30+Math.floor(130*Math.random()),s=n+e;this.pipes.push(new o(t,t.width,i,n-i)),this.pipes.push(new o(t,t.width,s,t.height-s-i))}},{key:"updatePipes",value:function(){var t=this;this.pipes.forEach((function(e){e.update(),e.behind(t.block)&&(e.passedBlock||(t.playerScore+=.5),e.passedBlock=!0),e.collidesWith(t.block)&&t.stop()})),this.pipes=this.pipes.filter((function(t){return!t.safeToRemoveFromArray}))}},{key:"drawPipes",value:function(){this.pipes.forEach((function(t){return t.draw()}))}}]),t}()},41:function(t,e,i){"use strict";i.r(e);var n=i(0),s=i.n(n),a=i(31);e.default=function(t){t.setDataAttributes({});var e=t.canvasRef.current,i=new a.FlappyBlockGameController(e);return e.focus(),e.tabIndex=1,i.start(),e.addEventListener("keyup",(function(t){"Space"===t.code&&i.onSpacePress()})),s.a.createElement(s.a.Fragment,null)}},91:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,"a",(function(){return n}))},92:function(t,e,i){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}i.d(e,"a",(function(){return s}))},93:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(91),s=i(92),a=function(){function t(e){Object(n.a)(this,t),this.canvas=void 0,this.canvasContext=void 0,this.drawBitmap=this.drawBitmap.bind(this),this.drawFilledRect=this.drawFilledRect.bind(this),this.drawOutlineRect=this.drawOutlineRect.bind(this),this.drawLine=this.drawLine.bind(this),this.drawFilledCircle=this.drawFilledCircle.bind(this),this.drawBitmap=this.drawBitmap.bind(this),this.writeText=this.writeText.bind(this),this.canvas=e,this.canvasContext=this.canvas.getContext("2d"),this.reset()}return Object(s.a)(t,[{key:"getBoundingClientRect",get:function(){return this.canvas.getBoundingClientRect()}},{key:"width",get:function(){return this.canvas.width}},{key:"height",get:function(){return this.canvas.height}}]),Object(s.a)(t,[{key:"reset",value:function(){this.canvasContext.setTransform(1,0,0,1,0,0)}},{key:"drawBitmap",value:function(t,e,i,n){this.canvasContext.save(),this.canvasContext.translate(e,i),this.canvasContext.rotate(n),this.canvasContext.drawImage(t,-t.width/2,-t.height/2),this.canvasContext.restore()}},{key:"drawFilledRect",value:function(t,e,i,n,s){this.canvasContext.fillStyle=s,this.canvasContext.fillRect(t,e,i,n)}},{key:"drawOutlineRect",value:function(t,e,i,n,s){this.canvasContext.strokeStyle=s,this.canvasContext.strokeRect(t,e,i,n)}},{key:"drawRoundedRect",value:function(t,e,i,n,s,a){this.canvasContext.beginPath(),this.canvasContext.strokeStyle=a,this.canvasContext.moveTo(t+i-s,e+n),this.canvasContext.arcTo(t,e+n,t,e,s),this.canvasContext.arcTo(t,e,t+i,e,s),this.canvasContext.arcTo(t+i,e,t+i,e+n,s),this.canvasContext.arcTo(t+i,e+n,t,e+n,s),this.canvasContext.stroke()}},{key:"drawLine",value:function(t,e,i,n,s,a){this.canvasContext.save(),this.canvasContext.beginPath(),this.canvasContext.lineWidth=s,this.canvasContext.strokeStyle=a,this.canvasContext.moveTo(t,e),this.canvasContext.lineTo(i,n),this.canvasContext.stroke(),this.canvasContext.restore()}},{key:"drawDashedLine",value:function(t,e,i,n,s,a,o){this.canvasContext.setLineDash(o),this.drawLine(t,e,i,n,s,a),this.canvasContext.setLineDash([])}},{key:"drawFilledCircle",value:function(t,e,i,n){this.canvasContext.beginPath(),this.canvasContext.fillStyle=n,this.canvasContext.arc(t,e,i,0,2*Math.PI,!0),this.canvasContext.fill()}},{key:"writeText",value:function(t,e,i,n,s){this.canvasContext.fillStyle=s,this.canvasContext.fillText(t,e,i)}},{key:"translate",value:function(t,e){this.canvasContext.translate(t,e)}},{key:"rotate",value:function(t){this.canvasContext.rotate(t)}},{key:"pushState",value:function(){this.canvasContext.save()}},{key:"popState",value:function(){this.canvasContext.restore()}}]),t}()}}]);
//# sourceMappingURL=18.38129419.chunk.js.map